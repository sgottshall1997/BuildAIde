Construction AI Assistant (Pro Mode)
âœ… 1. Backend Replit Prompt (promptFactory.js)
js
Copy
Edit
promptFactory.register("constructionAssistant", {
  system: `You are a construction expert with specialized roles (e.g., senior project manager, code compliance officer). Provide precise, code-compliant answers or tools (RFI, schedule estimates). Always output JSON. Assume project context when answering.`,
  user: `Answer the following query: "{{question}}". Project context: {{projectContext}}. Refer to relevant building codes (e.g., {{buildingCodeReference}}) if applicable. You may provide code citations or RFI formats. Format the answer in structured JSON.`
});
ğŸ›  Inputs:

question (e.g., â€œDo I need a permit for a 150A panel upgrade?â€)

projectContext (e.g., â€œSingle-family residential reno in Phoenix, AZâ€)

buildingCodeReference (optional; e.g., â€œ2020 NECâ€, â€œIRC 2021â€)

ğŸ§  Temp: 0.2
Use JSON.parse(), validate for fields like Top Insight, Details, or RFI.

âœ… 2. Expected Output JSON Format
json
Copy
Edit
{
  "Top Insight": "Yes, a permit is required for a 150A panel upgrade in Phoenix.",
  "Details": "According to the 2021 NEC as amended by Phoenix, permits are required for any service panel modification over 100 amps.",
  "Resources": ["NEC Section 230.79(D)", "Phoenix Code Appendix B"],
  "RFI": {
    "to": "City of Phoenix Electrical Department",
    "subject": "Permit Clarification â€“ 150A Panel Upgrade",
    "body": "Can you confirm if a permit is needed for upgrading a service panel to 150A in a residential property under 2021 NEC?"
  },
  "Warnings": ["Always confirm with the local inspector."]
}
âœ… 3. Frontend (React + TailwindCSS)
ğŸ§  Insight + Explanation
jsx
Copy
Edit
<div className="bg-gray-100 p-4 rounded mb-4">
  <h3 className="text-lg font-semibold">{TopInsight}</h3>
  <p className="mt-2">{Details}</p>
</div>
ğŸ”— Code Resources
jsx
Copy
Edit
{Resources?.length > 0 && (
  <div className="mb-4">
    <h4 className="font-semibold">Relevant Resources</h4>
    <ul className="list-disc ml-6">
      {Resources.map((r, i) => <li key={i}>{r}</li>)}
    </ul>
  </div>
)}
ğŸ“© RFI Format (Optional)
jsx
Copy
Edit
{RFI && (
  <div className="bg-blue-50 border-l-4 border-blue-400 p-4 rounded mb-4">
    <p><strong>To:</strong> {RFI.to}</p>
    <p><strong>Subject:</strong> {RFI.subject}</p>
    <p><strong>Body:</strong> {RFI.body}</p>
  </div>
)}
âš ï¸ Warnings
jsx
Copy
Edit
{Warnings?.length > 0 && (
  <div className="text-red-600 bg-red-50 p-3 rounded">
    {Warnings.map((w, i) => <p key={i}>âš  {w}</p>)}
  </div>
)}
âœ… 4. Error Handling & Fallbacks
If code citation is unknown â†’ GPT should reply:

"I do not have enough information on local code; consult a licensed inspector."

Include this as Top Insight, and provide a fallback RFI.

If Top Insight or JSON structure missing â†’ re-prompt with:
"Return only valid JSON with Top Insight, Details, and optional RFI."

â­ Bonus Automations
ğŸ”— Auto-link to Permit Tool if a permit is referenced

ğŸ“… Trigger Schedule Update if the question involves time (â€œHow long will electrical take?â€)

ğŸ“„ Save RFIs to Project Folder

ğŸ§  Persona-Aware Switching:

Project Manager = timeline, cost, contractor questions

Code Officer = citations, permitting, spec validation

